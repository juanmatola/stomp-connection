<html>

<head>
    <title>Explorador WebSocket Stomp</title>
    <style>
        html {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        input {
            width: 400px;
        }
    </style>
</head>

<body onload="disconnect()">
    <div>
        <h1>Ejemplo de conexion WebSocket mediante protocolo STOMP</h1>
        <div>
            <label for="ws"><b> uri: </b></label>
            <br>
            <input type="text" id="ws" value="ws://localhost:9097/socket-connect"
                placeholder="ws://example.com/socket" />
            <br>
            <label for="token"><b>bearer token: </b> (sin 'Bearer ')</label>
            <br>
            <input type="text" id="token"
                value="eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJzdXBlcmFkbWluIiwiaWF0IjoxNjU0NTQzODczLCJleHAiOjE2NTQ2MDE0NzMsInJvbGUiOlsiUk9MRV9DTE9BQ0FTX0FETUlOIiwiUk9MRV9BR1VBU19BRE1JTiIsIlJPTEVfSUxVTUlOQUNJT05fQURNSU4iLCJST0xFX1NFTUFGT1JPU19BRE1JTiJdLCJhcGVsbGlkbyI6Im5uIiwiaWQiOjUsIm9yZy1pZCI6MSwibm9tYnJlIjoic3VwZXJhZG1pbiIsImVtYWlsIjoic3VwZXJAYWRtaW4uY29tIn0.fpSERtPRXe_0SKhee2ivIF9zq257e2fpOncjjBBupWPhUA7ypaJUB8cY65XL0KTqhqGsv5E5_U2vu3-dvsco_A"
                placeholder="...." />
            <br>
            <div style="width: 400px;">
                <div id="connection_status_indicator"
                    style="float: right; display: inline-block; height: 15px; width: 30px; background-color: red;">
                </div>
            </div>
        </div>
        <br />
        <div>
            <button id="connect" onclick="connect();">Connect</button>
            <button id="disconnect" disabled="disabled" onclick="disconnect();">
                Disconnect
            </button>
        </div>
        <br />
    </div>

    <div>
        <div>
            <label for="ws"><b> topico: </b></label>
            <br>
            <input type="text" id="topic" value="/topic/message" placeholder="/topic/example" />
            <div style="width: 400px;">
                <div id="subscription_status_indicator"
                    style="float: right; display: inline-block; height: 15px; width: 30px; background-color: red;"></div>
            </div>
        </div>
        <br />
        <div>
            <button id="subscribe" disabled="disabled" onclick="subscribe();">Subscribe</button>
            <button id="unsubscribe" disabled="disabled" onclick="unsubscribe();">
                Unsubscribe
            </button>
        </div>
        <br />
    </div>

    <h3>Recepcion de mensajes: <button style="float: right;" onclick="clearConsole();">Clear console</button> </h3>
    <div style="background-color: rgb(27, 27, 27); color: rgb(247, 247, 247); height: 500px; overflow-y: scroll; padding: 10px;"
        id="console">

    </div>

    <div>
        <h4>+ info</h4>
        <p>- <a href="https://stomp.github.io/">¿Qué es stomp?</a></p>
        <p>- Para este ejemplo se utilizo la libreria webstomp-client: <a
                href="https://github.com/JSteunou/webstomp-client">github repo</a> -> <i>$npm install
                webstomp-client</i> </p>
        <p>- <a href="https://github.com/juanmatola/stomp-connection">Repositorio de este ejemplo</a></p>
    </div>

    <script src="./node_modules/webstomp-client/dist/webstomp.min.js"></script>
    <script src="./main.js"></script>
</body>

</html>